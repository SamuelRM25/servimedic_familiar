<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universo de Amor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            overflow: hidden;
            background-color: #000;
            font-family: 'Arial', sans-serif;
        }
        
        #container {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        
        #instructions {
            position: absolute;
            bottom: 20px;
            left: 20px;
            color: white;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
            z-index: 100;
        }
        
        .heart {
            position: absolute;
            width: 20px;
            height: 20px;
            color: #ff3366;
            font-size: 20px;
            text-align: center;
            line-height: 20px;
            z-index: 10;
        }
    </style>
</head>
<body>
    <div id="container"></div>
    <div id="instructions">
        Haz clic y arrastra para rotar el universo | Rueda del mouse para acercar/alejar
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    
    <script>
        // Variables globales
        let scene, camera, renderer, controls;
        let heart, particles = [];
        let phrases = [
            "Te Amo", "Eres la mejor", "Mi Vida", "Mi Amor", 
            "Mi Cielo", "Eres Especial", "Mi Arquitecta Favorita", 
            "Eres Mi Todo", "Te Adoro", "Mi Motorcito",
            "Eres Hermosa", "Eres Incre铆ble", "Mi Ni帽a",
            "Mi Sue帽o", "Mi Alegr铆a", "Mi Inspiraci贸n"
        ];
        let heartEmojis = ["わ", "", "", "", "", "", ""];

        // Inicializar la escena
        function init() {
            // Crear escena
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000010);

            // Crear c谩mara
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 50;

            // Crear renderizador
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.getElementById('container').appendChild(renderer.domElement);

            // Controles de 贸rbita
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;

            // Crear el coraz贸n central
            createHeart();

            // Crear estrellas con frases
            createStars();

            // Crear corazones flotantes
            createFloatingHearts();

            // A帽adir luces
            addLights();

            // Manejar redimensionado de ventana
            window.addEventListener('resize', onWindowResize);

            // Iniciar animaci贸n
            animate();
        }

        // Crear el coraz贸n central
        function createHeart() {
            // Crear geometr铆a del coraz贸n
            const x = 0, y = 0;
            const heartShape = new THREE.Shape();
            
            heartShape.moveTo(x + 5, y + 5);
            heartShape.bezierCurveTo(x + 5, y + 5, x + 4, y, x, y);
            heartShape.bezierCurveTo(x - 6, y, x - 6, y + 7, x - 6, y + 7);
            heartShape.bezierCurveTo(x - 6, y + 11, x - 3, y + 15.4, x + 5, y + 19);
            heartShape.bezierCurveTo(x + 12, y + 15.4, x + 16, y + 11, x + 16, y + 7);
            heartShape.bezierCurveTo(x + 16, y + 7, x + 16, y, x + 10, y);
            heartShape.bezierCurveTo(x + 7, y, x + 5, y + 5, x + 5, y + 5);

            const extrudeSettings = {
                depth: 8,
                bevelEnabled: true,
                bevelSegments: 2,
                steps: 2,
                bevelSize: 1,
                bevelThickness: 1
            };

            const geometry = new THREE.ExtrudeGeometry(heartShape, extrudeSettings);
            geometry.center();
            
            // Crear material con gradiente de color
            const material = new THREE.MeshPhongMaterial({
                color: 0xff3366,
                shininess: 100,
                emissive: 0x660022,
                emissiveIntensity: 0.2
            });

            heart = new THREE.Mesh(geometry, material);
            heart.scale.set(0.8, 0.8, 0.8);
            scene.add(heart);
        }

        // Crear estrellas con frases
        function createStars() {
            const starGeometry = new THREE.BufferGeometry();
            const starMaterial = new THREE.PointsMaterial({
                color: 0xffffff,
                size: 0.7,
                transparent: true
            });

            const starVertices = [];
            const phraseTextures = [];
            
            // Crear texturas para las frases
            phrases.forEach(phrase => {
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                canvas.width = 256;
                canvas.height = 256;
                
                context.fillStyle = 'rgba(0, 0, 0, 0)';
                context.fillRect(0, 0, canvas.width, canvas.height);
                
                context.font = 'Bold 40px Arial';
                context.textAlign = 'center';
                context.textBaseline = 'middle';
                context.fillStyle = '#ffffff';
                
                // Dividir frase larga en dos l铆neas
                const words = phrase.split(' ');
                if (words.length > 2) {
                    const firstLine = words.slice(0, Math.ceil(words.length/2)).join(' ');
                    const secondLine = words.slice(Math.ceil(words.length/2)).join(' ');
                    context.fillText(firstLine, canvas.width/2, canvas.height/2 - 20);
                    context.fillText(secondLine, canvas.width/2, canvas.height/2 + 20);
                } else {
                    context.fillText(phrase, canvas.width/2, canvas.height/2);
                }
                
                const texture = new THREE.CanvasTexture(canvas);
                phraseTextures.push(texture);
            });

            // Crear posiciones para las estrellas
            for (let i = 0; i < 200; i++) {
                const radius = 20 + Math.random() * 60;
                const theta = Math.random() * Math.PI * 2;
                const phi = Math.acos((Math.random() * 2) - 1);
                
                const x = radius * Math.sin(phi) * Math.cos(theta);
                const y = radius * Math.sin(phi) * Math.sin(theta);
                const z = radius * Math.cos(phi);
                
                starVertices.push(x, y, z);
                
                // Crear sprite para algunas estrellas con frases
                if (i % 10 === 0) {
                    const spriteMaterial = new THREE.SpriteMaterial({
                        map: phraseTextures[Math.floor(Math.random() * phraseTextures.length)],
                        transparent: true,
                        opacity: 0.8
                    });
                    
                    const sprite = new THREE.Sprite(spriteMaterial);
                    sprite.position.set(x, y, z);
                    sprite.scale.set(15, 15, 1);
                    scene.add(sprite);
                    
                    // A帽adir animaci贸n al sprite
                    particles.push({
                        mesh: sprite,
                        originalX: x,
                        originalY: y,
                        originalZ: z,
                        timeOffset: Math.random() * Math.PI * 2
                    });
                }
            }

            starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
            const stars = new THREE.Points(starGeometry, starMaterial);
            scene.add(stars);
        }

        // Crear corazones flotantes
        function createFloatingHearts() {
            const heartGeometry = new THREE.SphereGeometry(0.3, 8, 6);
            const heartMaterial = new THREE.MeshBasicMaterial({
                color: 0xff3366,
                transparent: true,
                opacity: 0.7
            });

            for (let i = 0; i < 50; i++) {
                const radius = 15 + Math.random() * 40;
                const theta = Math.random() * Math.PI * 2;
                const phi = Math.acos((Math.random() * 2) - 1);
                
                const x = radius * Math.sin(phi) * Math.cos(theta);
                const y = radius * Math.sin(phi) * Math.sin(theta);
                const z = radius * Math.cos(phi);
                
                const heartMesh = new THREE.Mesh(heartGeometry, heartMaterial);
                heartMesh.position.set(x, y, z);
                scene.add(heartMesh);
                
                particles.push({
                    mesh: heartMesh,
                    originalX: x,
                    originalY: y,
                    originalZ: z,
                    timeOffset: Math.random() * Math.PI * 2
                });
            }
        }

        // A帽adir luces a la escena
        function addLights() {
            // Luz ambiental
            const ambientLight = new THREE.AmbientLight(0x333333);
            scene.add(ambientLight);
            
            // Luz direccional principal
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(5, 5, 5);
            scene.add(directionalLight);
            
            // Luz puntual roja para el coraz贸n
            const pointLight = new THREE.PointLight(0xff3366, 1, 100);
            pointLight.position.set(0, 0, 0);
            scene.add(pointLight);
            
            // Luz puntual azul
            const blueLight = new THREE.PointLight(0x3366ff, 0.5, 100);
            blueLight.position.set(20, 20, 20);
            scene.add(blueLight);
        }

        // Redimensionar la ventana
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        // Funci贸n de animaci贸n
        function animate() {
            requestAnimationFrame(animate);
            
            // Rotar el coraz贸n
            if (heart) {
                heart.rotation.y += 0.005;
                heart.rotation.x += 0.002;
            }
            
            // Animar part铆culas
            const time = Date.now() * 0.001;
            
            particles.forEach(particle => {
                const { mesh, originalX, originalY, originalZ, timeOffset } = particle;
                const t = time + timeOffset;
                
                // Movimiento circular suave
                mesh.position.x = originalX + Math.sin(t) * 0.5;
                mesh.position.y = originalY + Math.cos(t * 1.3) * 0.5;
                mesh.position.z = originalZ + Math.sin(t * 0.7) * 0.5;
                
                // Rotaci贸n suave
                mesh.rotation.x += 0.01;
                mesh.rotation.y += 0.01;
            });
            
            controls.update();
            renderer.render(scene, camera);
        }

        // Inicializar cuando se carga la p谩gina
        window.onload = init;
    </script>
</body>
</html>
